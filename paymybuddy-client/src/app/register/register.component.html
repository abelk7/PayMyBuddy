<div class="card align-horizontal">
    <form #userForm="ngForm" (ngSubmit)="userForm.form.valid && onSubmit(userForm)"
          class="form-normal align-horizontal">

        <h2>Inscription</h2>

        <!--Nom-->
        <div class="form-group mb-3">
            <label for="inputNom">Nom</label>
            <input #nom="ngModel" [(ngModel)]="user.nom" [ngClass]="{ 'is-invalid': userForm.submitted && nom.invalid, 'is-valid': nom.valid}" class="form-control" id="inputNom" name="nom"
                   required type="text">
            <div *ngIf="userForm.submitted && nom.invalid" class="invalid-feedback">
                <small *ngIf="nom.errors ?. required">Le nom est requis.</small>
            </div>
            <div *ngIf="userForm.submitted && nom.valid" class="valid-feedback">
                <small>Le nom est valide.</small>
            </div>
        </div>

        <!--Prenom-->
        <div class="form-group mb-3">
            <label for="inputPrenom">Prénom</label>
            <input #prenom="ngModel" [(ngModel)]="user.prenom" [ngClass]="{ 'is-invalid': userForm.submitted && prenom.invalid, 'is-valid': prenom.valid }" class="form-control" id="inputPrenom"
                   name="prenom"
                   required
                   type="text">
            <div *ngIf="userForm.submitted && prenom.invalid" class="invalid-feedback">
                <small *ngIf="nom.errors ?. required">Le prénom est requis.</small>
            </div>
            <div *ngIf="userForm.submitted && prenom.valid" class="valid-feedback">
                <small>Le prenom est valide.</small>
            </div>
        </div>

        <!--Email-->
        <div class="form-group mb-3">
            <label for="inputEmail">Email</label>
            <input #email="ngModel" [(ngModel)]="user.email" [ngClass]="{ 'is-invalid': userForm.submitted && email.invalid, 'is-valid': userForm.submitted && email.valid  }" class="form-control" email
                   id="inputEmail"
                   name="email"
                   required type="email">
            <div *ngIf="userForm.submitted && email.invalid" class="invalid-feedback">
                <small *ngIf="email.errors ?. required">l'adresse email est requis.</small>
                <small *ngIf="email.errors ?. email">L'adresse email doit être valide.</small>
            </div>
            <div *ngIf="userForm.submitted && email.valid" class="valid-feedback">
                <small>L'adresse email est valide.</small>
            </div>
        </div>

        <!--Password-->
        <div class="form-group mb-3">
            <label for="inputPassword">Mot de passe</label>
            <input #password="ngModel" [(ngModel)]="user.password" [ngClass]="{ 'is-invalid': userForm.submitted && password.invalid, 'is-valid': userForm.submitted && password.valid  }" class="form-control" id="inputPassword"
                   minlength="8"
                   name="password"
                   required type="password">
            <div *ngIf="userForm.submitted && password.invalid" class="invalid-feedback">
                <small *ngIf="password.errors?.required">Le mot de passe est requis.</small>
                <small *ngIf="password.errors?.minlength">Le mot de passe doit contenir 8 caractères au minimum.</small>
            </div>
            <div *ngIf="userForm.submitted && password.valid" class="valid-feedback">
                <small>Le mot de passe est valide.</small>
            </div>
        </div>

        <!--Confirmation Password-->
        <div class="form-group mb-3">
            <label for="inputRpPassword">Confirmation du mot de passe</label>
            <input #rppassword="ngModel" [(ngModel)]="user.rppassword" [ngClass]="{ 'is-invalid': userForm.submitted && user.password !== user.rppassword, 'is-valid': userForm.submitted && user.password != '' &&  user.password == user.rppassword }" class="form-control"
                   id="inputRpPassword" name="rppassword"
                   required
                   type="password">
            <div *ngIf="userForm.submitted && user.password !== user.rppassword" class="invalid-feedback">
                <small *ngIf="userForm.submitted && user.password !== user.rppassword">Les mots de passe doivent être
                    identiques.</small>
            </div>
            <div *ngIf="userForm.submitted && password.valid && user.password === user.rppassword"
                 class="valid-feedback">
            </div>
        </div>

        <!--Date-->
        <div class="form-group mb-3">
            <label for="inputDateNaissance">Date de naissance</label>
            <input #date_naissance="ngModel" [(ngModel)]="user.date_naissance" [ngClass]="{ 'is-invalid': userForm.submitted && date_naissance.errors ?.max > '2000-01-01'}" class="form-control"
                   id="inputDateNaissance" max='2004-01-01'
                   name="date_naissance"
                   required type="date">
            <div *ngIf="userForm.submitted && date_naissance.valid " class="valid-feedback">
                <small *ngIf="userForm.submitted && date_naissance.valid ">Vous devez avoir 18 ans minimum pour vous
                    inscrire</small>
            </div>
        </div>

        <div class="text-center">
            <button class="btn btn-primary btn-md" id="submit" type="submit">Register</button>
        </div>

    </form>

</div>
